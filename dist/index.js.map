{"version":3,"sources":["../src/js/index.js"],"names":["BLUR","SYSTEM_EVENTS","CHANGE","RESET","ON_CLICK","DOM_EVENTS","ON_BLUR","ON_FOCUS","ON_KEY_UP","ON_MOUSE_DOWN","ENTER","KEYS","ARROW_UP","ARROW_DOWN","Select","elem","params","placeholder","name","options","label","events","PubSub","isOpen","count","select","i","children","length","value","innerText","document","createElement","setAttribute","selectOptions","push","innerHTML","join","tabIndex","style","display","wrapper","copyDivParentNode","cloneNode","copyDivLabel","classList","add","parentNode","appendChild","insertBefore","nextSibling","labelWrapper","lbl","input","dropdown","dropdownOptions","icon","_setupEventHandlers","_removeEventHandlers","remove","undefined","removeEventListener","_showDropdownBound","_hideDropdownBound","_handleOptionClickBound","event","preventDefault","unsubscribe","body","_handleOptionKeyUpBound","_handleOptionClick","bind","_handleOptionKeyUp","_showDropdown","_hideDropdown","addEventListener","subscribe","target","dataset","matches","_setValueToInput","_setValueToSelect","_getSelectedState","_removeActive","selectedState","_addActive","_setSelectedState","publish","keyCode","Element","console","error","Error","eventName","callback","selected","contains","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;IAGEA,I,GAGEC,wB,CAHFD,I;IACAE,M,GAEED,wB,CAFFC,M;IACAC,K,GACEF,wB,CADFE,K;IAIAC,Q,GAKEC,qB,CALFD,Q;IACAE,O,GAIED,qB,CAJFC,O;IACAC,Q,GAGEF,qB,CAHFE,Q;IACAC,S,GAEEH,qB,CAFFG,S;IACAC,a,GACEJ,qB,CADFI,a;IAIAC,K,GAGEC,e,CAHFD,K;IACAE,Q,GAEED,e,CAFFC,Q;IACAC,U,GACEF,e,CADFE,U;AAGF;;;;;;IAKMC,M;;;;;AACJ;;;;;;AAMA,kBAAYC,IAAZ,EAAkBC,MAAlB,EAA0B;AAAA;;AAAA;AACxB,kHAAMF,MAAN,EAAcC,IAAd,EAAoBC,MAApB;AADwB,8BAQpBA,MARoB,CAItBC,WAJsB;AAAA,QAItBA,WAJsB,oCAIR,EAJQ;AAAA,uBAQpBD,MARoB,CAKtBE,IALsB;AAAA,QAKtBA,IALsB,6BAKf,EALe;AAAA,0BAQpBF,MARoB,CAMtBG,OANsB;AAAA,QAMtBA,OANsB,gCAMZ,EANY;AAAA,wBAQpBH,MARoB,CAOtBI,KAPsB;AAAA,QAOtBA,KAPsB,8BAOd,EAPc,kBAUxB;;AACA,UAAKC,MAAL,GAAc,IAAIC,kBAAJ,EAAd,CAXwB,CAaxB;;AACA,UAAKC,MAAL,GAAc,KAAd;AACA,UAAKC,KAAL,GAAa,CAAb;AACA,UAAKL,OAAL,GAAeA,OAAf;;AAEA,QAAI,MAAKJ,IAAT,EAAe;AACb;AACA,YAAKU,MAAL,GAAc,MAAKV,IAAnB,CAFa,CAGb;;AACA,WAAK,IAAIW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,MAAKD,MAAL,CAAYE,QAAZ,CAAqBC,MAAzC,EAAiDF,CAAC,IAAI,CAAtD,EAAyD;AACvD,YAAI,CAAC,MAAKD,MAAL,CAAYE,QAAZ,CAAqBD,CAArB,EAAwBG,KAAzB,IAAkC,CAAC,MAAKJ,MAAL,CAAYE,QAAZ,CAAqBD,CAArB,EAAwBI,SAA/D,EAA0E;AAC1E;AACE;AACF;AACC;;AACD,cAAKX,OAAL,CAAaO,CAAb,IAAkB;AAChBG,UAAAA,KAAK,EAAE,MAAKJ,MAAL,CAAYE,QAAZ,CAAqBD,CAArB,EAAwBG,KADf;AAEhBT,UAAAA,KAAK,EAAE,MAAKK,MAAL,CAAYE,QAAZ,CAAqBD,CAArB,EAAwBI;AAFf,SAAlB;AAID;AACF,KAfD,MAeO;AACL;AACA,YAAKL,MAAL,GAAcM,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAd;;AACA,YAAKP,MAAL,CAAYQ,YAAZ,CAAyB,MAAzB,EAAiCf,IAAjC,EAHK,CAIL;;;AACA,UAAMgB,aAAa,GAAG,EAAtB;;AACA,WAAK,IAAIR,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG,MAAKP,OAAL,CAAaS,MAAjC,EAAyCF,EAAC,IAAI,CAA9C,EAAiD;AAC/C,YAAI,CAAC,MAAKP,OAAL,CAAaO,EAAb,EAAgBG,KAAjB,IAA0B,CAAC,MAAKV,OAAL,CAAaO,EAAb,EAAgBN,KAA/C,EAAsD;AACtD;AACE;AACF;AACC;;AACDc,QAAAA,aAAa,CAACC,IAAd,2BAAqC,MAAKhB,OAAL,CAAaO,EAAb,EAAgBG,KAArD,gBAA+D,MAAKV,OAAL,CAAaO,EAAb,EAAgBN,KAA/E;AACD;;AAED,YAAKK,MAAL,CAAYW,SAAZ,GAAwBF,aAAa,CAACG,IAAd,CAAmB,EAAnB,CAAxB;AACD;;AAED,UAAKZ,MAAL,CAAYa,QAAZ,GAAuB,CAAC,CAAxB;AACA,UAAKb,MAAL,CAAYc,KAAZ,CAAkBC,OAAlB,GAA4B,MAA5B,CApDwB,CAsDxB;;AACA,UAAKC,OAAL,GAAeV,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAf;;AAEA,QAAMU,iBAAiB,GAAG,MAAKD,OAAL,CAAaE,SAAb,CAAuB,KAAvB,CAA1B;;AACA,QAAMC,YAAY,GAAG,MAAKH,OAAL,CAAaE,SAAb,CAAuB,KAAvB,CAArB;;AAEA,UAAKF,OAAL,CAAaI,SAAb,CAAuBC,GAAvB,CAA2B,UAA3B;;AAEA,QAAI,CAAC,MAAKrB,MAAL,CAAYsB,UAAjB,EAA6B;AAC3B,UAAMA,UAAU,GAAGL,iBAAnB;AACAK,MAAAA,UAAU,CAACC,WAAX,CAAuB,MAAKvB,MAA5B;AACD,KAHD,MAGO;AACL;AACA;AACA;AACA,YAAKA,MAAL,CAAYsB,UAAZ,CAAuBE,YAAvB,CAAoC,MAAKR,OAAzC,EAAkD,MAAKhB,MAAL,CAAYyB,WAA9D;AACD,KAtEuB,CAwExB;;;AACA,QAAMC,YAAY,GAAGP,YAArB;AACA,QAAMQ,GAAG,GAAGrB,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAZ;AACAmB,IAAAA,YAAY,CAACN,SAAb,CAAuBC,GAAvB,CAA2B,iBAA3B;AACAM,IAAAA,GAAG,CAAChB,SAAJ,GAAgBhB,KAAhB;AACA+B,IAAAA,YAAY,CAACH,WAAb,CAAyBI,GAAzB,EA7EwB,CA+ExB;;AACA,UAAKC,KAAL,GAAatB,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAb;;AACA,UAAKqB,KAAL,CAAWR,SAAX,CAAqBC,GAArB,CAAyB,iBAAzB;;AACA,UAAKO,KAAL,CAAWpB,YAAX,CAAwB,MAAxB,EAAgC,MAAhC;;AACA,UAAKoB,KAAL,CAAWpB,YAAX,CAAwB,UAAxB,EAAoC,IAApC;;AACA,UAAKoB,KAAL,CAAWpB,YAAX,CAAwB,aAAxB,EAAuChB,WAAvC,EApFwB,CAsFxB;;;AACA,UAAKqC,QAAL,GAAgBvB,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CAAhB;;AACA,UAAKsB,QAAL,CAAcT,SAAd,CAAwBC,GAAxB,CAA4B,oBAA5B;;AAEA,QAAMS,eAAe,GAAG,EAAxB;AACA;;AACA,SAAK,IAAI7B,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAG,MAAKP,OAAL,CAAaS,MAAjC,EAAyCF,GAAC,IAAI,CAA9C,EAAiD;AAC/C,UAAI,CAAC,MAAKP,OAAL,CAAaO,GAAb,EAAgBG,KAAjB,IAA0B,CAAC,MAAKV,OAAL,CAAaO,GAAb,EAAgBN,KAA/C,EAAsD;AACpD;AAED;;AACDmC,MAAAA,eAAe,CAACpB,IAAhB,+DAAyE,MAAKhB,OAAL,CAAaO,GAAb,EAAgBG,KAAzF,gBAAmG,MAAKV,OAAL,CAAaO,GAAb,EAAgBN,KAAnH;AAED;;AAED,UAAKkC,QAAL,CAAclB,SAAd,GAA0BmB,eAAe,CAAClB,IAAhB,CAAqB,EAArB,CAA1B,CArGwB,CAuGxB;;AACA,QAAMmB,IAAI,mfAAV;AAMA;AACA;;AACA,UAAKf,OAAL,CAAaL,SAAb,GAAyBoB,IAAzB;;AACA,UAAKf,OAAL,CAAaO,WAAb,CAAyBG,YAAzB;;AACA,UAAKV,OAAL,CAAaO,WAAb,CAAyB,MAAKK,KAA9B;;AACA,UAAKZ,OAAL,CAAaO,WAAb,CAAyB,MAAKM,QAA9B,EAnHwB,CAqHxB;;;AACA,UAAKG,mBAAL;;AAtHwB;AAuHzB;;;;;AAMD;;;8BAGU;AACR,WAAKC,oBAAL;;AACA,WAAKjB,OAAL,CAAakB,MAAb;AACA,WAAKlB,OAAL,GAAemB,SAAf;AACD;AAED;;;;;;2CAGuB;AACrB,WAAKP,KAAL,CAAWQ,mBAAX,CAA+BzD,QAA/B,EAAyC,KAAK0D,kBAA9C;AACA,WAAKT,KAAL,CAAWQ,mBAAX,CAA+BtD,QAA/B,EAAyC,KAAKuD,kBAA9C;AACA,WAAKT,KAAL,CAAWQ,mBAAX,CAA+BvD,OAA/B,EAAwC,KAAKyD,kBAA7C;AACA,WAAKT,QAAL,CAAcO,mBAAd,CAAkCzD,QAAlC,EAA4C,KAAK4D,uBAAjD;AACA,WAAKV,QAAL,CAAcO,mBAAd,CAAkCpD,aAAlC,EAAiD,UAAAwD,KAAK;AAAA,eAAIA,KAAK,CAACC,cAAN,EAAJ;AAAA,OAAtD;AACA,WAAK7C,MAAL,CAAY8C,WAAZ,CAAwBnE,IAAxB,EAA8B,KAAK+D,kBAAnC;AACAhC,MAAAA,QAAQ,CAACqC,IAAT,CAAcP,mBAAd,CAAkCrD,SAAlC,EAA6C,KAAK6D,uBAAlD;AACD;AAED;;;;;;0CAGsB;AACpB,WAAKL,uBAAL,GAA+B,KAAKM,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAA/B;AACA,WAAKF,uBAAL,GAA+B,KAAKG,kBAAL,CAAwBD,IAAxB,CAA6B,IAA7B,CAA/B;AACA,WAAKT,kBAAL,GAA0B,KAAKW,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB,CAA1B;AACA,WAAKR,kBAAL,GAA0B,KAAKW,aAAL,CAAmBH,IAAnB,CAAwB,IAAxB,CAA1B;AAEA,WAAKlB,KAAL,CAAWsB,gBAAX,CAA4BvE,QAA5B,EAAsC,KAAK0D,kBAA3C;AACA,WAAKT,KAAL,CAAWsB,gBAAX,CAA4BpE,QAA5B,EAAsC,KAAKuD,kBAA3C;AACA,WAAKT,KAAL,CAAWsB,gBAAX,CAA4BrE,OAA5B,EAAqC,KAAKyD,kBAA1C;AACA,WAAKT,QAAL,CAAcqB,gBAAd,CAA+BlE,aAA/B,EAA8C,UAAAwD,KAAK;AAAA,eAAIA,KAAK,CAACC,cAAN,EAAJ;AAAA,OAAnD;AACA,WAAKZ,QAAL,CAAcqB,gBAAd,CAA+BvE,QAA/B,EAAyC,KAAK4D,uBAA9C;AACA,WAAK3C,MAAL,CAAYuD,SAAZ,CAAsB5E,IAAtB,EAA4B,KAAK+D,kBAAjC;AACAhC,MAAAA,QAAQ,CAACqC,IAAT,CAAcO,gBAAd,CAA+BnE,SAA/B,EAA0C,0BAAS,KAAK6D,uBAAd,EAAuC,GAAvC,CAA1C,EAAuF,IAAvF;AACD;AAED;;;;;;;6CAIyE;AAAA,UAApDQ,MAAoD,QAApDA,MAAoD;AAAA,6BAA5CA,MAA4C;AAAA,4CAAlCC,OAAkC;AAAA,UAAlCA,OAAkC,oCAAxB,EAAwB;AAAA,8CAApBhD,SAAoB;AAAA,UAApBA,SAAoB,sCAAR,EAAQ;AAAA,UAC/DD,KAD+D,GACrDiD,OADqD,CAC/DjD,KAD+D;AAEvE,UAAMT,KAAK,GAAGU,SAAd;;AACA,UAAI+C,MAAM,CAACE,OAAP,CAAe,IAAf,CAAJ,EAA0B;AACxB,aAAKC,gBAAL,CAAsB5D,KAAtB;;AACA,aAAK6D,iBAAL,CAAuBpD,KAAvB;;AACA,aAAKqD,iBAAL;;AACA,aAAKC,aAAL,CAAmB,KAAKC,aAAxB;;AACA,aAAKC,UAAL,CAAgBR,MAAhB;;AACA,aAAKS,iBAAL,CAAuBT,MAAvB;;AACA,aAAKxD,MAAL,CAAYkE,OAAZ,CAAoBvF,IAApB;AACD;AACF;AAED;;;;;;;8CAIgC;AAAA,UAAXwF,OAAW,SAAXA,OAAW;AAC9B,UAAI,CAAC,KAAKjE,MAAV,EAAkB;;AAElB,UAAIiE,OAAO,KAAK5E,QAAhB,EAA0B;AACxB,YAAI,KAAKY,KAAL,KAAe,CAAnB,EAAsB;AAAE;AACtB,eAAKA,KAAL,GAAa,KAAK8B,QAAL,CAAc3B,QAAd,CAAuBC,MAApC,CADoB,CACwB;AAC7C;;AACD,aAAKJ,KAAL,GAAa,KAAKA,KAAL,GAAa,CAA1B;;AAEA,aAAK0D,iBAAL;;AACA,aAAKC,aAAL,CAAmB,KAAKC,aAAxB;;AACA,aAAKC,UAAL,CAAgB,KAAK/B,QAAL,CAAc3B,QAAd,CAAuB,KAAKH,KAA5B,CAAhB;;AACA,aAAK8D,iBAAL,CAAuB,KAAKhC,QAAL,CAAc3B,QAAd,CAAuB,KAAKH,KAA5B,CAAvB;AACD,OAVD,MAUO,IAAIgE,OAAO,KAAK3E,UAAhB,EAA4B;AACjC,aAAKW,KAAL,GAAa,KAAKA,KAAL,GAAa,CAA1B,CADiC,CACJ;;AAC7B,aAAKA,KAAL,GAAa,KAAKA,KAAL,GAAa,KAAK8B,QAAL,CAAc3B,QAAd,CAAuBC,MAAjD,CAFiC,CAEwB;;AAEzD,aAAKsD,iBAAL;;AACA,aAAKC,aAAL,CAAmB,KAAKC,aAAxB;;AACA,aAAKC,UAAL,CAAgB,KAAK/B,QAAL,CAAc3B,QAAd,CAAuB,KAAKH,KAA5B,CAAhB;;AACA,aAAK8D,iBAAL,CAAuB,KAAKhC,QAAL,CAAc3B,QAAd,CAAuB,KAAKH,KAA5B,CAAvB;AACD,OARM,MAQA,IAAIgE,OAAO,KAAK9E,KAAhB,EAAuB;AAAA,oCACa,KAAK4C,QAAL,CAAc3B,QAAd,CAAuB,KAAKH,KAA5B,CADb;AAAA,2DACpBsD,OADoB;AAAA,YACpBA,OADoB,uCACV,EADU;AAAA,2DACNhD,SADM;AAAA,YACNA,SADM,uCACM,EADN;AAAA,YAEpBD,KAFoB,GAEViD,OAFU,CAEpBjD,KAFoB;AAG5B,YAAMT,KAAK,GAAGU,SAAd;;AACA,aAAKkD,gBAAL,CAAsB5D,KAAtB;;AACA,aAAK6D,iBAAL,CAAuBpD,KAAvB;;AACA,aAAKR,MAAL,CAAYkE,OAAZ,CAAoBvF,IAApB;AACD;AACF;AAED;;;;;;;uCAI6B;AAAA,UAAZoB,KAAY,uEAAJ,EAAI;AAC3B,WAAKiC,KAAL,CAAWxB,KAAX,GAAmBT,KAAnB;AACD;AAED;;;;;;;wCAI8B;AAAA,UAAZS,KAAY,uEAAJ,EAAI;AAC5B,WAAKJ,MAAL,CAAYI,KAAZ,GAAoBA,KAApB;;AACA,UAAIA,KAAK,IAAI,KAAKR,MAAL,CAAYA,MAAZ,CAAmBnB,MAAhC,EAAwC;AACtC,aAAKmB,MAAL,CAAYkE,OAAZ,CAAoBrF,MAApB,EAA4B2B,KAA5B;AACD;AACF;AACD;;;;;AAIA;;;;6BACSd,I,EAAM;AACb,UAAI,EAAEA,IAAI,YAAY0E,OAAlB,CAAJ,EAAgC;AAC9BC,QAAAA,OAAO,CAACC,KAAR,CAAcC,KAAK,WAAI7E,IAAJ,6BAAnB;AACA;AACD;AACD;;;AACAA,MAAAA,IAAI,CAACiC,WAAL,CAAiB,KAAKP,OAAtB;AACD;AAED;;;;;;;;uBAKGoD,S,EAAWC,Q,EAAU;AACtB,WAAKzE,MAAL,CAAYuD,SAAZ,CAAsBiB,SAAtB,EAAiCC,QAAjC;AACD;AAED;;;;;;;sCAIkBC,Q,EAAU;AAC1B,WAAKX,aAAL,GAAqBW,QAArB;AACD;AAED;;;;;;;wCAIoB;AAClB,aAAO,KAAKX,aAAZ;AACD;AAED;;;;;;4BAGQ;AACN,WAAKJ,gBAAL,CAAsB,IAAtB;;AACA,WAAKC,iBAAL,CAAuB,IAAvB;;AACA,WAAK5D,MAAL,CAAYkE,OAAZ,CAAoBpF,KAApB;AACD;AAED;;;;;AAIA;;;;+BACWY,I,EAAM;AACf,UAAI,CAACA,IAAI,CAAC8B,SAAL,CAAemD,QAAf,CAAwB,WAAxB,CAAL,EAA2C;AACzCjF,QAAAA,IAAI,CAAC8B,SAAL,CAAeC,GAAf,CAAmB,WAAnB;AACD;AACF;AAED;;;;;;;kCAIc/B,I,EAAM;AAClB,UAAIA,IAAI,IAAIA,IAAI,CAAC8B,SAAL,CAAemD,QAAf,CAAwB,WAAxB,CAAZ,EAAkD;AAChDjF,QAAAA,IAAI,CAAC8B,SAAL,CAAec,MAAf,CAAsB,WAAtB;AACD;AACF;AAED;;;;;;oCAGgB;AACd,WAAKpC,MAAL,GAAc,IAAd;AACA,WAAK+B,QAAL,CAAcT,SAAd,CAAwBC,GAAxB,CAA4B,YAA5B;AACD;AAED;;;;;;oCAGgB;AACd,WAAKvB,MAAL,GAAc,KAAd;AACA,WAAK+B,QAAL,CAAcT,SAAd,CAAwBc,MAAxB,CAA+B,YAA/B;AACD;AACD;;;;yBAvMY5C,I,EAAMI,O,EAAS;AACzB,sGAAkB,IAAlB,EAAwBJ,IAAxB,EAA8BI,OAA9B;AACD;;;EAlIkB8E,qB;;eA0UNnF,M","sourcesContent":["import PubSub from '@m2g/pubsub';\nimport debounce from './debounce';\nimport Component from './component';\nimport { SYSTEM_EVENTS, DOM_EVENTS, KEYS } from './constants';\n\nconst {\n  BLUR,\n  CHANGE,\n  RESET\n} = SYSTEM_EVENTS;\n\nconst {\n  ON_CLICK,\n  ON_BLUR,\n  ON_FOCUS,\n  ON_KEY_UP,\n  ON_MOUSE_DOWN\n} = DOM_EVENTS;\n\nconst {\n  ENTER,\n  ARROW_UP,\n  ARROW_DOWN\n} = KEYS;\n\n/**\n * @class\n * @constructor\n * @public\n */\nclass Select extends Component {\n  /**\n   * Construct Select instance\n   * @constructor\n   * @param {Element} elem\n   * @param {Object} params\n   */\n  constructor(elem, params) {\n    super(Select, elem, params);\n\n    const {\n      placeholder = '', // placeholder\n      name = '', // name\n      options = [], // options\n      label = '' // label\n    } = params;\n\n    // instantiation pubsub\n    this.events = new PubSub();\n\n    // Setup\n    this.isOpen = false;\n    this.count = 0;\n    this.options = options;\n\n    if (this.elem) {\n      // select tag in DOM\n      this.select = this.elem;\n      // read values from DOM\n      for (let i = 0; i < this.select.children.length; i += 1) {\n        if (!this.select.children[i].value && !this.select.children[i].innerText) {\n        /* eslint-disable */\n          continue;\n        /* eslint-enable */\n        }\n        this.options[i] = {\n          value: this.select.children[i].value,\n          label: this.select.children[i].innerText\n        };\n      }\n    } else {\n      // select created programmatically\n      this.select = document.createElement('select');\n      this.select.setAttribute('name', name);\n      // https://www.freecodecamp.org/forum/t/create-strings-using-template-literals-with-for-loop/220850\n      const selectOptions = [];\n      for (let i = 0; i < this.options.length; i += 1) {\n        if (!this.options[i].value && !this.options[i].label) {\n        /* eslint-disable */\n          continue;\n        /* eslint-enable */\n        }\n        selectOptions.push(`<option value=\"${this.options[i].value}\">${this.options[i].label}</option>`);\n      }\n\n      this.select.innerHTML = selectOptions.join('');\n    }\n\n    this.select.tabIndex = -1;\n    this.select.style.display = 'none';\n\n    // wrapper\n    this.wrapper = document.createElement('div');\n\n    const copyDivParentNode = this.wrapper.cloneNode(false);\n    const copyDivLabel = this.wrapper.cloneNode(false);\n\n    this.wrapper.classList.add('c-select');\n\n    if (!this.select.parentNode) {\n      const parentNode = copyDivParentNode;\n      parentNode.appendChild(this.select);\n    } else {\n      // @see how to make a wrap with DOM in vanilla\n      // https://plainjs.com/javascript/manipulation/wrap-an-html-structure-around-an-element-28/\n      // https://stackoverflow.com/questions/3337587/wrapping-a-set-of-dom-elements-using-javascript/13169465\n      this.select.parentNode.insertBefore(this.wrapper, this.select.nextSibling);\n    }\n\n    // label\n    const labelWrapper = copyDivLabel;\n    const lbl = document.createElement('label');\n    labelWrapper.classList.add('c-select__label');\n    lbl.innerHTML = label;\n    labelWrapper.appendChild(lbl);\n\n    // input\n    this.input = document.createElement('input');\n    this.input.classList.add('c-select__input');\n    this.input.setAttribute('type', 'text');\n    this.input.setAttribute('readonly', true);\n    this.input.setAttribute('placeholder', placeholder);\n\n    // dropdown\n    this.dropdown = document.createElement('ul');\n    this.dropdown.classList.add('c-select__dropdown');\n\n    const dropdownOptions = [];\n    /* eslint-disable */\n    for (let i = 0; i < this.options.length; i += 1) {\n      if (!this.options[i].value && !this.options[i].label) {\n        continue;\n\n      }\n      dropdownOptions.push(`<li class=\"c-select__dropdown__item\" data-value=\"${this.options[i].value}\">${this.options[i].label}</li>`);\n\n    }\n\n    this.dropdown.innerHTML = dropdownOptions.join('');\n\n    // icon\n    const icon = `\n      <div class=\"c-select__icon\">\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"28\" viewBox=\"0 0 16 28\">\n          <path d=\"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z\"></path>\n        </svg>\n      </div>`;\n    /* eslint-enable */\n    // append\n    this.wrapper.innerHTML = icon;\n    this.wrapper.appendChild(labelWrapper);\n    this.wrapper.appendChild(this.input);\n    this.wrapper.appendChild(this.dropdown);\n\n    // Init events\n    this._setupEventHandlers();\n  }\n\n  static init(elem, options) {\n    return super.init(this, elem, options);\n  }\n\n  /**\n   * Destroy\n   */\n  destroy() {\n    this._removeEventHandlers();\n    this.wrapper.remove();\n    this.wrapper = undefined;\n  }\n\n  /**\n   * Remove Event Handlers\n   */\n  _removeEventHandlers() {\n    this.input.removeEventListener(ON_CLICK, this._showDropdownBound);\n    this.input.removeEventListener(ON_FOCUS, this._showDropdownBound);\n    this.input.removeEventListener(ON_BLUR, this._hideDropdownBound);\n    this.dropdown.removeEventListener(ON_CLICK, this._handleOptionClickBound);\n    this.dropdown.removeEventListener(ON_MOUSE_DOWN, event => event.preventDefault());\n    this.events.unsubscribe(BLUR, this._hideDropdownBound);\n    document.body.removeEventListener(ON_KEY_UP, this._handleOptionKeyUpBound);\n  }\n\n  /**\n   * Setup Event Handlers\n   */\n  _setupEventHandlers() {\n    this._handleOptionClickBound = this._handleOptionClick.bind(this);\n    this._handleOptionKeyUpBound = this._handleOptionKeyUp.bind(this);\n    this._showDropdownBound = this._showDropdown.bind(this);\n    this._hideDropdownBound = this._hideDropdown.bind(this);\n\n    this.input.addEventListener(ON_CLICK, this._showDropdownBound);\n    this.input.addEventListener(ON_FOCUS, this._showDropdownBound);\n    this.input.addEventListener(ON_BLUR, this._hideDropdownBound);\n    this.dropdown.addEventListener(ON_MOUSE_DOWN, event => event.preventDefault());\n    this.dropdown.addEventListener(ON_CLICK, this._handleOptionClickBound);\n    this.events.subscribe(BLUR, this._hideDropdownBound);\n    document.body.addEventListener(ON_KEY_UP, debounce(this._handleOptionKeyUpBound, 150), true);\n  }\n\n  /**\n   * Handle Option Click\n   * @param {Event} event\n   */\n  _handleOptionClick({ target, target: { dataset = '', innerText = '' } }) {\n    const { value } = dataset;\n    const label = innerText;\n    if (target.matches('li')) {\n      this._setValueToInput(label);\n      this._setValueToSelect(value);\n      this._getSelectedState();\n      this._removeActive(this.selectedState);\n      this._addActive(target);\n      this._setSelectedState(target);\n      this.events.publish(BLUR);\n    }\n  }\n\n  /**\n   * Handle Option Keyup\n   * @param {Event} event\n   */\n  _handleOptionKeyUp({ keyCode }) {\n    if (!this.isOpen) return;\n\n    if (keyCode === ARROW_UP) {\n      if (this.count === 0) { // i would become 0\n        this.count = this.dropdown.children.length; // so put it at the other end of the array\n      }\n      this.count = this.count - 1;\n\n      this._getSelectedState();\n      this._removeActive(this.selectedState);\n      this._addActive(this.dropdown.children[this.count]);\n      this._setSelectedState(this.dropdown.children[this.count]);\n    } else if (keyCode === ARROW_DOWN) {\n      this.count = this.count + 1; // increase i by one\n      this.count = this.count % this.dropdown.children.length; // if we've gone too high, start from `0` again\n\n      this._getSelectedState();\n      this._removeActive(this.selectedState);\n      this._addActive(this.dropdown.children[this.count]);\n      this._setSelectedState(this.dropdown.children[this.count]);\n    } else if (keyCode === ENTER) {\n      const { dataset = '', innerText = '' } = this.dropdown.children[this.count];\n      const { value } = dataset;\n      const label = innerText;\n      this._setValueToInput(label);\n      this._setValueToSelect(value);\n      this.events.publish(BLUR);\n    }\n  }\n\n  /**\n   * Set text value to input\n   * @param {Label} label\n   */\n  _setValueToInput(label = '') {\n    this.input.value = label;\n  }\n\n  /**\n   * Set text value to select\n   * @param {Value} value\n   */\n  _setValueToSelect(value = '') {\n    this.select.value = value;\n    if (value && this.events.events.CHANGE) {\n      this.events.publish(CHANGE, value);\n    }\n  }\n  /**\n   * Append element\n   * @param {Element} elem\n   */\n  /* eslint-disable */\n  appendTo(elem) {\n    if (!(elem instanceof Element)) {\n      console.error(Error(`${elem} is not an HTML Element`));\n      return;\n    }\n    /* eslint-enable */\n    elem.appendChild(this.wrapper);\n  }\n\n  /**\n   * Bind event\n   * @param {eventName} event\n   * @param {callback} callback\n   */\n  on(eventName, callback) {\n    this.events.subscribe(eventName, callback);\n  }\n\n  /**\n   * Set selected elem\n   * @param {Selected} selected\n   */\n  _setSelectedState(selected) {\n    this.selectedState = selected;\n  }\n\n  /**\n   * Get selected elem\n   * @return {Element} elem\n   */\n  _getSelectedState() {\n    return this.selectedState;\n  }\n\n  /**\n   * Reset\n   */\n  reset() {\n    this._setValueToInput(null);\n    this._setValueToSelect(null);\n    this.events.publish(RESET);\n  }\n\n  /**\n   * Add active\n   * @param {Element} elem\n   */\n  /* eslint-disable */\n  _addActive(elem) {\n    if (!elem.classList.contains('is-active')) {\n      elem.classList.add('is-active');\n    }\n  }\n\n  /**\n   * Remove active\n   * @param {Element} elem\n   */\n  _removeActive(elem) {\n    if (elem && elem.classList.contains('is-active')) {\n      elem.classList.remove('is-active');\n    }\n  }\n\n  /**\n   * Show dropdown\n   */\n  _showDropdown() {\n    this.isOpen = true;\n    this.dropdown.classList.add('is-visible');\n  }\n\n  /**\n   * Hide dropdown\n   */\n  _hideDropdown() {\n    this.isOpen = false;\n    this.dropdown.classList.remove('is-visible');\n  }\n  /* eslint-enable */\n}\n\nexport default Select;\n"],"file":"index.js"}