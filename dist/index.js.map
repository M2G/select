{"version":3,"sources":["../src/js/index.js"],"names":["BLUR","SYSTEM_EVENTS","CHANGE","RESET","ON_CLICK","DOM_EVENTS","ON_BLUR","ON_FOCUS","ON_KEY_UP","ON_MOUSE_DOWN","ENTER","KEYS","ARROW_UP","ARROW_DOWN","Select","elem","params","placeholder","name","options","label","events","PubSub","isOpen","count","tagName","select","i","children","length","value","innerText","document","createElement","setAttribute","selectOptions","push","innerHTML","join","tabIndex","style","display","wrapper","cloneDiv","cloneNode","cloneDivParentNode","classList","add","labelWrapper","lbl","appendChild","input","dropdown","dropdownOptions","icon","parentNode","_setupEventHandlers","_removeEventHandlers","remove","undefined","removeEventListener","_showDropdownBound","_hideDropdownBound","_handleOptionClickBound","event","preventDefault","unsubscribe","body","_handleOptionKeyUpBound","_handleOptionClick","bind","_handleOptionKeyUp","_showDropdown","_hideDropdown","addEventListener","subscribe","target","dataset","matches","_setValueToInput","_setValueToSelect","_getSelectedState","_removeActive","selectedState","_addActive","_setSelectedState","publish","keyCode","Element","console","error","Error","eventName","callback","selected","contains","Component"],"mappings":"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","sourcesContent":["import PubSub from '@m2g/pubsub';\nimport debounce from './debounce';\nimport Component from './component';\nimport wrap from './wrap';\nimport { SYSTEM_EVENTS, DOM_EVENTS, KEYS } from './constants';\n\nconst {\n  BLUR,\n  CHANGE,\n  RESET\n} = SYSTEM_EVENTS;\n\nconst {\n  ON_CLICK,\n  ON_BLUR,\n  ON_FOCUS,\n  ON_KEY_UP,\n  ON_MOUSE_DOWN\n} = DOM_EVENTS;\n\nconst {\n  ENTER,\n  ARROW_UP,\n  ARROW_DOWN\n} = KEYS;\n\n/**\n * @class\n * @constructor\n * @public\n */\nclass Select extends Component {\n  /**\n   * Construct Select instance\n   * @constructor\n   * @param {Element} elem\n   * @param {Object} params\n   */\n  constructor(elem, params) {\n    super(Select, elem, params);\n\n    const {\n      placeholder = '', // placeholder\n      name = '', // name\n      options = [], // options\n      label = '' // label\n    } = params;\n\n    // instantiation pubsub\n    this.events = new PubSub();\n\n    // Setup\n    this.isOpen = false;\n    this.count = 0;\n    this.options = options;\n    if (this.elem && this.elem.tagName === 'SELECT') {\n      // select tag in DOM\n      this.select = this.elem;\n      // read values from DOM\n      for (let i = 0; i < this.select.children.length; i += 1) {\n        if (this.select.children[i].value && this.select.children[i].innerText) {\n          this.options[i] = {\n            value: this.select.children[i].value,\n            label: this.select.children[i].innerText\n          };\n        }\n      }\n    } else {\n      // select created programmatically\n      this.select = document.createElement('select');\n      this.select.setAttribute('name', name);\n      // https://www.freecodecamp.org/forum/t/create-strings-using-template-literals-with-for-loop/220850\n      const selectOptions = [];\n      for (let i = 0; i < this.options.length; i += 1) {\n        if (this.options[i].value && this.options[i].label) {\n          selectOptions.push(`<option value=\"${this.options[i].value}\">${this.options[i].label}</option>`);\n        }\n      }\n      this.select.innerHTML = selectOptions.join('');\n    }\n\n    this.select.tabIndex = -1;\n    this.select.style.display = 'none';\n\n    // wrapper\n    this.wrapper = document.createElement('div');\n\n    const cloneDiv = this.wrapper.cloneNode(false);\n    const cloneDivParentNode = this.wrapper.cloneNode(false);\n\n    this.wrapper.classList.add('c-select');\n\n    // label\n    const labelWrapper = cloneDiv;\n    const lbl = document.createElement('label');\n    labelWrapper.classList.add('c-select__label');\n    lbl.innerHTML = label;\n    labelWrapper.appendChild(lbl);\n\n    // input\n    this.input = document.createElement('input');\n    this.input.classList.add('c-select__input');\n    this.input.setAttribute('type', 'text');\n    this.input.setAttribute('readonly', true);\n    this.input.setAttribute('placeholder', placeholder);\n\n    // dropdown\n    this.dropdown = document.createElement('ul');\n    this.dropdown.classList.add('c-select__dropdown');\n\n    const dropdownOptions = [];\n    for (let i = 0; i < this.options.length; i += 1) {\n      if (this.options[i].value && this.options[i].label) {\n        dropdownOptions.push(\n          `<li class=\"c-select__dropdown__item\" data-value=\"${this.options[i].value}\">${this.options[i].label}</li>`\n        );\n      }\n    }\n\n    this.dropdown.innerHTML = dropdownOptions.join('');\n\n    /* eslint-disable */\n    // icon\n    const icon = `\n      <div class=\"c-select__icon\">\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"28\" viewBox=\"0 0 16 28\">\n          <path d=\"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z\"></path>\n        </svg>\n      </div>`;\n    /* eslint-enable */\n    // append\n    this.wrapper.innerHTML = icon;\n    this.wrapper.appendChild(labelWrapper);\n    this.wrapper.appendChild(this.input);\n    this.wrapper.appendChild(this.dropdown);\n\n    if (!this.select.parentNode && this.elem) {\n      this.elem.appendChild(this.select);\n      this.elem.appendChild(this.wrapper);\n    } else if (!this.select.parentNode) {\n      cloneDivParentNode.appendChild(this.select);\n      cloneDivParentNode.appendChild(this.wrapper);\n      this.wrapper = cloneDivParentNode;\n    } else {\n      // @see how to make a wrap with DOM in vanilla\n      // https://plainjs.com/javascript/manipulation/wrap-an-html-structure-around-an-element-28/\n      wrap(this.elem, cloneDivParentNode);\n      cloneDivParentNode.appendChild(this.wrapper);\n    }\n\n    // Init events\n    this._setupEventHandlers();\n  }\n\n  static init(elem, options) {\n    return super.init(this, elem, options);\n  }\n\n  /**\n   * Destroy\n   */\n  destroy() {\n    this._removeEventHandlers();\n    this.wrapper.remove();\n    this.wrapper = undefined;\n  }\n\n  /**\n   * Remove Event Handlers\n   */\n  _removeEventHandlers() {\n    this.input.removeEventListener(ON_CLICK, this._showDropdownBound);\n    this.input.removeEventListener(ON_FOCUS, this._showDropdownBound);\n    this.input.removeEventListener(ON_BLUR, this._hideDropdownBound);\n    this.dropdown.removeEventListener(ON_CLICK, this._handleOptionClickBound);\n    this.dropdown.removeEventListener(ON_MOUSE_DOWN, event => event.preventDefault());\n    this.events.unsubscribe(BLUR, this._hideDropdownBound);\n    document.body.removeEventListener(ON_KEY_UP, this._handleOptionKeyUpBound);\n  }\n\n  /**\n   * Setup Event Handlers\n   */\n  _setupEventHandlers() {\n    this._handleOptionClickBound = this._handleOptionClick.bind(this);\n    this._handleOptionKeyUpBound = this._handleOptionKeyUp.bind(this);\n    this._showDropdownBound = this._showDropdown.bind(this);\n    this._hideDropdownBound = this._hideDropdown.bind(this);\n\n    this.input.addEventListener(ON_CLICK, this._showDropdownBound);\n    this.input.addEventListener(ON_FOCUS, this._showDropdownBound);\n    this.input.addEventListener(ON_BLUR, this._hideDropdownBound);\n    this.dropdown.addEventListener(ON_MOUSE_DOWN, event => event.preventDefault());\n    this.dropdown.addEventListener(ON_CLICK, this._handleOptionClickBound);\n    this.events.subscribe(BLUR, this._hideDropdownBound);\n    document.body.addEventListener(ON_KEY_UP, debounce(this._handleOptionKeyUpBound, 150), true);\n  }\n\n  /**\n   * Handle Option Click\n   * @param {Event} event\n   */\n  _handleOptionClick({ target, target: { dataset = '', innerText = '' } }) {\n    const { value } = dataset;\n    const label = innerText;\n    if (target.matches('li')) {\n      this._setValueToInput(label);\n      this._setValueToSelect(value);\n      this._getSelectedState();\n      this._removeActive(this.selectedState);\n      this._addActive(target);\n      this._setSelectedState(target);\n      this.events.publish(BLUR);\n    }\n  }\n\n  /**\n   * Handle Option Keyup\n   * @param {Event} event\n   */\n  _handleOptionKeyUp({ keyCode }) {\n    if (!this.isOpen) return;\n\n    if (keyCode === ARROW_UP) {\n      if (this.count === 0) { // i would become 0\n        this.count = this.dropdown.children.length; // so put it at the other end of the array\n      }\n      this.count = this.count - 1;\n\n      this._getSelectedState();\n      this._removeActive(this.selectedState);\n      this._addActive(this.dropdown.children[this.count]);\n      this._setSelectedState(this.dropdown.children[this.count]);\n    } else if (keyCode === ARROW_DOWN) {\n      this.count = this.count + 1; // increase i by one\n      this.count = this.count % this.dropdown.children.length; // if we've gone too high, start from `0` again\n\n      this._getSelectedState();\n      this._removeActive(this.selectedState);\n      this._addActive(this.dropdown.children[this.count]);\n      this._setSelectedState(this.dropdown.children[this.count]);\n    } else if (keyCode === ENTER) {\n      const { dataset = '', innerText = '' } = this.dropdown.children[this.count];\n      const { value } = dataset;\n      const label = innerText;\n      this._setValueToInput(label);\n      this._setValueToSelect(value);\n      this.events.publish(BLUR);\n    }\n  }\n\n  /**\n   * Set text value to input\n   * @param {Label} label\n   */\n  _setValueToInput(label = '') {\n    this.input.value = label;\n  }\n\n  /**\n   * Set text value to select\n   * @param {Value} value\n   */\n  _setValueToSelect(value = '') {\n    this.select.value = value;\n    if (value && this.events.events.CHANGE) {\n      this.events.publish(CHANGE, value);\n    }\n  }\n  /**\n   * Append element\n   * @param {Element} elem\n   */\n  /* eslint-disable */\n  appendTo(elem) {\n    if (!(elem instanceof Element)) {\n      console.error(Error(`${elem} is not an HTML Element`));\n      return;\n    }\n\n    elem.appendChild(this.wrapper);\n  }\n  /**\n   * Bind event\n   * @param {eventName} event\n   * @param {callback} callback\n   */\n  on(eventName, callback) {\n    this.events.subscribe(eventName, callback);\n  }\n  /**\n   * Set selected elem\n   * @param {Selected} selected\n   */\n  _setSelectedState(selected) {\n    this.selectedState = selected;\n  }\n\n  /**\n   * Get selected elem\n   * @return {Element} elem\n   */\n  _getSelectedState() {\n    return this.selectedState;\n  }\n\n  /**\n   * Reset\n   */\n  reset() {\n    this._setValueToInput(null);\n    this._setValueToSelect(null);\n    this.events.publish(RESET);\n  }\n\n  /**\n   * Add active\n   * @param {Element} elem\n   */\n  _addActive(elem) {\n    if (!elem.classList.contains('is-active')) {\n      elem.classList.add('is-active');\n    }\n  }\n\n  /**\n   * Remove active\n   * @param {Element} elem\n   */\n  _removeActive(elem) {\n    if (elem && elem.classList.contains('is-active')) {\n      elem.classList.remove('is-active');\n    }\n  }\n\n  /**\n   * Show dropdown\n   */\n  _showDropdown() {\n    this.isOpen = true;\n    this.dropdown.classList.add('is-visible');\n  }\n\n  /**\n   * Hide dropdown\n   */\n  _hideDropdown() {\n    this.isOpen = false;\n    this.dropdown.classList.remove('is-visible');\n  }\n  /* eslint-disable */\n}\n\nexport default Select;\n"],"file":"index.js"}